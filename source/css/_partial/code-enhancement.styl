// 代码高亮和语法增强样式
// Code highlighting and syntax enhancement styles

// 代码块语言标签
.highlight
  position: relative
  
  &[data-lang]:before
    content: attr(data-lang)
    position: absolute
    top: 0.5rem
    right: 1rem
    font-size: 0.75rem
    color: #94a3b8
    text-transform: uppercase
    font-weight: 500
    z-index: 1
    
  // 行号优化
  .gutter
    user-select: none
    border-right: 1px solid #e2e8f0
    background: #f8fafc
    
    .line
      color: #94a3b8
      text-align: right
      padding-right: 0.5rem
      
  // 代码内容区域
  .code
    .line
      padding-left: 1rem

// 特定语言的代码块样式
.highlight
  // JavaScript
  &.js, &.javascript
    &:before
      content: "JavaScript"
      color: #f7df1e
      
  // TypeScript  
  &.ts, &.typescript
    &:before
      content: "TypeScript"
      color: #3178c6
      
  // CSS
  &.css
    &:before
      content: "CSS"
      color: #1572b6
      
  // HTML
  &.html, &.xml
    &:before
      content: "HTML"
      color: #e34f26
      
  // Python
  &.py, &.python
    &:before
      content: "Python"
      color: #3776ab
      
  // JSON
  &.json
    &:before
      content: "JSON"
      color: #000000
      
  // Bash/Shell
  &.bash, &.sh, &.shell
    &:before
      content: "Shell"
      color: #4eaa25

// 内联代码块的语法高亮
code
  // API 相关
  &[class*="api"], &[class*="method"]
    background: linear-gradient(135deg, rgba(59, 130, 246, 0.1) 0%, rgba(147, 51, 234, 0.1) 100%)
    color: #3b82f6
    border: 1px solid rgba(59, 130, 246, 0.2)
    
  // 文件路径
  &[class*="path"], &[class*="file"]
    background: linear-gradient(135deg, rgba(34, 197, 94, 0.1) 0%, rgba(5, 150, 105, 0.1) 100%)
    color: #059669
    border: 1px solid rgba(5, 150, 105, 0.2)
    
  // 命令行
  &[class*="cmd"], &[class*="command"]
    background: linear-gradient(135deg, rgba(55, 65, 81, 0.1) 0%, rgba(17, 24, 39, 0.1) 100%)
    color: #374151
    border: 1px solid rgba(55, 65, 81, 0.2)

// 复制按钮样式
.code-copy-btn
  position: absolute
  top: 0.5rem
  right: 0.5rem
  background: rgba(255, 255, 255, 0.9)
  border: 1px solid #e2e8f0
  border-radius: 4px
  padding: 0.25rem 0.5rem
  font-size: 0.75rem
  color: #6b7280
  cursor: pointer
  transition: all 0.2s ease
  z-index: 2
  
  &:hover
    background: white
    color: #374151
    border-color: #d1d5db
    
  &:active
    transform: scale(0.95)
    
  &.copied
    background: #059669
    color: white
    border-color: #059669

// 差异显示样式（git diff 等）
.diff
  .line
    &.added
      background: rgba(34, 197, 94, 0.1)
      border-left: 3px solid #22c55e
      
    &.removed
      background: rgba(239, 68, 68, 0.1)
      border-left: 3px solid #ef4444
      
    &.changed
      background: rgba(245, 158, 11, 0.1)
      border-left: 3px solid #f59e0b

// 代码块折叠功能
.code-fold
  position: relative
  
  .fold-btn
    position: absolute
    top: 0.5rem
    left: 0.5rem
    background: rgba(255, 255, 255, 0.9)
    border: 1px solid #e2e8f0
    border-radius: 4px
    width: 1.5rem
    height: 1.5rem
    display: flex
    align-items: center
    justify-content: center
    cursor: pointer
    font-size: 0.75rem
    color: #6b7280
    z-index: 2
    
    &:hover
      background: white
      color: #374151
      
  &.folded
    .code
      max-height: 3rem
      overflow: hidden
      
    .fold-btn:after
      content: "+"
      
  &:not(.folded)
    .fold-btn:after
      content: "−"
