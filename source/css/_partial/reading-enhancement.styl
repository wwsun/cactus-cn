// 阅读体验增强样式
// Reading experience enhancement styles

// 文章内容容器优化
article .content
  // 提升可读性的字体渲染
  text-rendering: optimizeLegibility
  -webkit-font-smoothing: antialiased
  -moz-osx-font-smoothing: grayscale
  
  // 段落间距和对齐
  text-align: justify
  text-justify: inter-ideograph
  
  // 避免孤立字符
  orphans: 3
  widows: 3

// 阅读进度指示器
.reading-progress
  position: fixed
  top: 0
  left: 0
  width: 100%
  height: 3px
  background: rgba(229, 231, 235, 0.3)
  z-index: 1000
  
  .progress-bar
    height: 100%
    background: linear-gradient(90deg, $color-accent 0%, lighten($color-accent, 20%) 100%)
    width: 0%
    transition: width 0.1s ease-out

// 目录导航（TOC）样式
.toc
  position: sticky
  top: 2rem
  float: right
  width: 250px
  margin-left: 2rem
  background: rgba(248, 250, 252, 0.8)
  backdrop-filter: blur(10px)
  border: 1px solid #e2e8f0
  border-radius: 8px
  padding: 1rem
  font-size: 0.85rem
  max-height: 70vh
  overflow-y: auto
  
  .toc-title
    font-weight: 600
    color: #374151
    margin-bottom: 0.5rem
    border-bottom: 1px solid #e5e7eb
    padding-bottom: 0.5rem
    
  .toc-list
    list-style: none
    padding: 0
    margin: 0
    
    li
      margin: 0.25rem 0
      
      a
        color: #6b7280
        text-decoration: none
        display: block
        padding: 0.25rem 0
        border-left: 2px solid transparent
        padding-left: 0.5rem
        transition: all 0.2s ease
        
        &:hover
          color: $color-accent
          border-left-color: $color-accent
          background: rgba(5, 150, 105, 0.05)
          
        &.active
          color: $color-accent
          border-left-color: $color-accent
          background: rgba(5, 150, 105, 0.1)
          font-weight: 500
          
    // 嵌套列表
    .toc-list
      margin-left: 1rem
      font-size: 0.9em
      
      .toc-list
        margin-left: 1rem
        font-size: 0.85em

// 返回顶部按钮
.back-to-top
  position: fixed
  bottom: 2rem
  right: 2rem
  width: 3rem
  height: 3rem
  background: $color-accent
  color: white
  border: none
  border-radius: 50%
  cursor: pointer
  display: flex
  align-items: center
  justify-content: center
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15)
  transition: all 0.3s ease
  z-index: 100
  opacity: 0
  transform: translateY(1rem)
  
  &.visible
    opacity: 1
    transform: translateY(0)
    
  &:hover
    background: darken($color-accent, 10%)
    transform: translateY(-2px)
    box-shadow: 0 6px 16px rgba(0, 0, 0, 0.2)
    
  &:active
    transform: translateY(0) scale(0.95)

// 字体大小调节器
.font-size-controls
  position: fixed
  top: 50%
  right: 1rem
  transform: translateY(-50%)
  display: flex
  flex-direction: column
  gap: 0.5rem
  background: rgba(255, 255, 255, 0.9)
  backdrop-filter: blur(10px)
  border: 1px solid #e2e8f0
  border-radius: 8px
  padding: 0.5rem
  z-index: 100
  
  button
    width: 2rem
    height: 2rem
    border: none
    background: transparent
    border-radius: 4px
    cursor: pointer
    color: #6b7280
    font-weight: bold
    transition: all 0.2s ease
    
    &:hover
      background: #f3f4f6
      color: #374151
      
    &.active
      background: $color-accent
      color: white

// 字体大小变体类
.font-small
  .content
    font-size: 14px
    line-height: 1.7
    
.font-large
  .content
    font-size: 17px
    line-height: 1.9
    
.font-extra-large
  .content
    font-size: 19px
    line-height: 2.0

// 主题切换（深色模式预留）
.theme-toggle
  position: fixed
  top: 1rem
  right: 1rem
  width: 2.5rem
  height: 2.5rem
  border: none
  background: rgba(255, 255, 255, 0.9)
  backdrop-filter: blur(10px)
  border-radius: 50%
  cursor: pointer
  display: flex
  align-items: center
  justify-content: center
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1)
  transition: all 0.2s ease
  z-index: 100
  
  &:hover
    background: rgba(255, 255, 255, 1)
    transform: scale(1.05)

// 响应式优化
@media screen and (max-width: 1200px)
  .toc
    display: none
    
@media screen and (max-width: 768px)
  .font-size-controls
    display: none
    
  .back-to-top
    bottom: 1rem
    right: 1rem
    width: 2.5rem
    height: 2.5rem
    
  .theme-toggle
    top: 0.5rem
    right: 0.5rem

// 打印时隐藏交互元素
@media print
  .reading-progress,
  .toc,
  .back-to-top,
  .font-size-controls,
  .theme-toggle
    display: none !important
